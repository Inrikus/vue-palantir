import{p as U,k as H,_ as j,f as S,m as $,C as M,i as q,o as f,b as I,w as C,c as p,g as _,T as F,n as N,a as c,d as J,t as L,D as O,E as T,s as x,G as K,l as W,y as V,H as z,F as P,r as R,q as D,I as Y,J as G}from"./BXlpFhld.js";import{d as Q,e as X}from"./QzWGY4mI.js";const Te=U("/wiki/Mechs/Img_BigScreenBG.png"),We=H("wikiLabels",{state:()=>({loading:!1,error:"",loadedLocale:"en",items:[],byId:{}}),actions:{async load(s="en"){if(!this.loading&&!(this.items.length&&this.loadedLocale===s)){this.loading=!0,this.error="";try{const{data:o}=await Q(s),t=Array.isArray(o?.labels)?o.labels:[];this.items=t,this.byId=Object.fromEntries(t.map(i=>[i.ID,i])),this.loadedLocale=s}catch(o){this.error=o?.response?.data?.detail||o?.message||"Labels fetch failed",this.items=[],this.byId={}}finally{this.loading=!1}}}}}),Ve=H("wikiBuffs",{state:()=>({loading:!1,error:"",loadedLocale:"en",items:[],byId:{}}),actions:{async load(s="en"){if(!this.loading&&!(this.items.length&&this.loadedLocale===s)){this.loading=!0,this.error="";try{const{data:o}=await X(s),t=Array.isArray(o?.buffs)?o.buffs:[];this.items=t,this.byId=Object.fromEntries(t.map(i=>[i.id,i])),this.loadedLocale=s}catch(o){this.error=o?.response?.data?.detail||o?.message||"Buffs fetch failed",this.items=[],this.byId={}}finally{this.loading=!1}}}}});function Z(s){if(s==null)return"";const o=Number(s)/100;return Number.isInteger(o)?String(o):o.toFixed(2).replace(/\.?0+$/,"")}function ze(s){const o={locale:s?.locale||"en",findBuff:s?.findBuff||(()=>null)};function t(e){o.locale=e||o.locale}function i(e,l=[]){return e?e.replace(/\{(\d+)\}(%?)/g,(u,m,h)=>{const y=Number(m),v=Z(l[y]);return h?`${v}%`:v}):""}function d(e){if(!e)return"";let l=e;return l=l.replace(/<color=#([0-9a-fA-F]{6})>/g,(u,m)=>`<span style="color:#${m}">`).replace(/<\/color(?:=#?[0-9a-fA-F]{6})?>/gi,"</span>"),l=l.replace(/<buff=(\d+),(\d+)>/g,(u,m,h)=>{const y=Number(m),v=Number(h),w=o.findBuff(y,v);if(!w)return`<span class="opacity-70">(Unknown Buff ${y})</span>`;const b=w.i18n?.name?.[o.locale]||w.englishName||`Buff ${y}`;return`
        <span class="inline-flex items-center gap-[0.25em] align-baseline not-prose inline-buff-wrap">
          <img src="${`/wiki/Buffs/${w.Icon||"Icon_Buff_Unknown"}.png`}" alt="" class="inline-buff-icon" />
          <span class="inline-block text-[#63B4C8] leading-none">${b}</span>
        </span>
      `}),l}function a(e,l=[]){return d(i(e,l))}return{format:a,setLocale:t}}const ee={class:"panel-header"},te={class:"panel-headings"},ne={class:"panel-title"},se={key:0,class:"panel-count"},ae={class:"panel-actions"},le={class:"panel-body"},oe={__name:"WikiFilterPanelFrame",props:{open:{type:Boolean,default:!1},title:{type:String,default:"Filters"},count:{type:[Number,String],default:null}},emits:["close","reset"],setup(s){const o=s,t=S(()=>typeof window<"u"?window.matchMedia("(max-width: 640px)").matches:!1);function i(d){if(!t.value)return;const a=document.documentElement,e=document.body;a.classList.toggle("hidden-scroll",!!d),e.classList.toggle("hidden-scroll",!!d)}return $(()=>o.open,d=>{i(d)}),M(()=>i(!1)),(d,a)=>(f(),q(T,{to:"body"},[I(F,{name:"filter-fade"},{default:C(()=>[s.open?(f(),p("div",{key:0,class:"filter-overlay",onClick:a[0]||(a[0]=e=>d.$emit("close"))})):_("",!0)]),_:1}),I(F,{name:t.value?"slide-up":"slide-down"},{default:C(()=>[s.open?(f(),p("aside",{key:0,class:N(["filter-shell glass-surface glass-surface--radial",["fixed z-[1001] overflow-hidden text-white","sm:inset-y-0 sm:left-0 sm:w-[740px] sm:max-w-[92vw]","inset-x-0 bottom-0 top-0 sm:inset-auto"]]),role:"dialog","aria-modal":"true"},[c("header",ee,[c("div",te,[a[3]||(a[3]=c("p",{class:"panel-eyebrow"},"Filters",-1)),c("h3",ne,[J(L(s.title)+" ",1),s.count!==null?(f(),p("span",se,"("+L(s.count)+")",1)):_("",!0)])]),c("div",ae,[c("button",{class:"ghost-btn",type:"button",onClick:a[1]||(a[1]=e=>d.$emit("reset"))}," Reset "),c("button",{class:"ghost-btn",type:"button",onClick:a[2]||(a[2]=e=>d.$emit("close"))}," Close ")])]),c("div",le,[O(d.$slots,"default",{},void 0,!0)])])):_("",!0)]),_:3},8,["name"])]))}},He=j(oe,[["__scopeId","data-v-155b6cdb"]]),ie={class:"relative inline-block"},re=["aria-expanded"],ce=["src","alt"],de={class:"text-sm font-medium"},ue=["onClick","aria-selected"],fe={class:"flex items-center gap-2"},me=["src","alt"],pe={class:"text-sm"},ge={class:"text-xs opacity-70 uppercase"},ve={key:1,id:"locale-menu",class:"absolute z-40 mt-2 w-56 rounded-md bg-[#232228] ring-1 ring-white/10 shadow-lg overflow-hidden",role:"listbox"},he=["onClick","aria-selected"],be={class:"flex items-center gap-2"},ye=["src","alt"],we={class:"text-sm"},_e={class:"text-xs opacity-70 uppercase"},De={__name:"WikiLocalePicker",props:{modelValue:{type:String,default:"en"},options:{type:Array,default:void 0},useTeleport:{type:Boolean,default:!0},placementOffset:{type:Number,default:8}},emits:["update:modelValue","change"],setup(s,{emit:o}){const t=[{value:"en",native:"English",flag:"/flags/Icon_Flag_English.png"},{value:"ru",native:"Русский",flag:"/flags/Icon_Flag_Russia.png"},{value:"ch",native:"中文",flag:"/flags/Icon_Flag_Chinese.png"},{value:"jp",native:"日本語",flag:"/flags/Icon_Flag_Japanese.png"},{value:"kr",native:"한국어",flag:"/flags/Icon_Flag_Korean.png"},{value:"vn",native:"Tiếng Việt",flag:"/flags/Icon_Flag_Vietnamese.png"},{value:"id",native:"Bahasa Indonesia",flag:"/flags/Icon_Flag_Indonesian.png"},{value:"tr",native:"Türkçe",flag:"/flags/Icon_Flag_Turkish.png"}],i=s,d=o,a=x(!1),e=x(null),l=S(()=>i.options?.length?i.options:t),u=S(()=>l.value.find(r=>r.value===i.modelValue)||l.value[0]||{native:i.modelValue,flag:""});function m(){a.value=!a.value}function h(r){d("update:modelValue",r),d("change",r),a.value=!1}function y(r){if(!a.value||!e.value)return;const g=document.getElementById("locale-menu");if(!g){a.value=!1;return}!g.contains(r.target)&&!e.value.contains(r.target)&&(a.value=!1)}function v(r){r.key==="Escape"&&(a.value=!1)}const w=x({top:"0px",left:"0px",minWidth:"14rem"});function b(){if(!e.value)return;const r=e.value.getBoundingClientRect(),g=document.documentElement.clientWidth,n=r.left,k=r.bottom+i.placementOffset,B=224;let A=n;A+B>g-8&&(A=Math.max(8,g-B-8)),w.value={position:"fixed",top:`${Math.round(k)}px`,left:`${Math.round(A)}px`,minWidth:`${B}px`,zIndex:1e3}}return $(a,async r=>{r&&(await K(),b())}),W(()=>{document.addEventListener("click",y,{passive:!0}),document.addEventListener("keydown",v),window.addEventListener("resize",b,{passive:!0}),window.addEventListener("scroll",b,{passive:!0})}),M(()=>{document.removeEventListener("click",y),document.removeEventListener("keydown",v),window.removeEventListener("resize",b),window.removeEventListener("scroll",b)}),(r,g)=>(f(),p("div",ie,[c("button",{ref_key:"btnRef",ref:e,onClick:m,class:"inline-flex items-center gap-2 rounded-md px-2.5 py-1.5 ring-1 ring-white/10 hover:ring-white/20 bg-neutral-900/50","aria-haspopup":"listbox","aria-expanded":a.value?"true":"false"},[u.value.flag?(f(),p("img",{key:0,src:u.value.flag,alt:u.value.native,class:"w-5 h-5 rounded-sm object-contain"},null,8,ce)):_("",!0),c("span",de,L(u.value.native),1),g[0]||(g[0]=c("svg",{class:"w-4 h-4 opacity-70",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1))],8,re),s.useTeleport?(f(),q(T,{key:0,to:"body"},[V(c("div",{id:"locale-menu",class:"rounded-md bg-[#232228] ring-1 ring-white/10 shadow-lg overflow-hidden",style:D(w.value),role:"listbox"},[(f(!0),p(P,null,R(l.value,n=>(f(),p("button",{key:n.value,class:"w-full flex items-center justify-between gap-3 px-3 py-2 text-left hover:bg-white/5",onClick:k=>h(n.value),role:"option","aria-selected":n.value===s.modelValue},[c("div",fe,[n.flag?(f(),p("img",{key:0,src:n.flag,alt:n.native,class:"w-5 h-5 rounded-sm object-contain"},null,8,me)):_("",!0),c("span",pe,L(n.native),1)]),c("span",ge,L(n.value),1)],8,ue))),128))],4),[[z,a.value]])])):V((f(),p("div",ve,[(f(!0),p(P,null,R(l.value,n=>(f(),p("button",{key:n.value,class:"w-full flex items-center justify-between gap-3 px-3 py-2 text-left hover:bg-white/5",onClick:k=>h(n.value),role:"option","aria-selected":n.value===s.modelValue},[c("div",be,[n.flag?(f(),p("img",{key:0,src:n.flag,alt:n.native,class:"w-5 h-5 rounded-sm object-contain"},null,8,ye)):_("",!0),c("span",we,L(n.native),1)]),c("span",_e,L(n.value),1)],8,he))),128))],512)),[[z,a.value]])]))}},ke={1:"Common",2:"Elite",4:"Epic",8:"Legend",16:"Mythical"},xe={1:"Striker",2:"Keystone",4:"Buster",8:"Bullseye",16:"Apostle"},Le={64:"Body (T)",128:"Bag L",256:"Bag R",512:"Arm L",1024:"Arm R",2048:"Shoulder L",4096:"Shoulder R"},E={rarity:"#7aa7ff",job:"#63B4C8",position:"#f97316",uniq:"#eab308"},$e=[{id:1,img:"/wiki/Mechs/Img_Pic_1.png",label:"Striker"},{id:2,img:"/wiki/Mechs/Img_Pic_2.png",label:"Keystone"},{id:4,img:"/wiki/Mechs/Img_Pic_4.png",label:"Buster"},{id:8,img:"/wiki/Mechs/Img_Pic_8.png",label:"Bullseye"},{id:16,img:"/wiki/Mechs/Img_Pic_16.png",label:"Apostle"}];function Ue(s="All"){return[{id:0,img:"/wiki/Mechs/Img_Pic_0.png",label:s},...$e.map(t=>({...t}))]}const Be={class:"flex flex-col gap-2"},Ee={key:0,class:"flex flex-wrap items-center gap-2"},Se=["onClick"],Ie={class:"chip-label"},Ce={__name:"WikiActiveFiltersBar",props:{locale:{type:String,default:"en"},rares:{type:Array,default:()=>[]},jobs:{type:Array,default:()=>[]},labels:{type:Array,default:()=>[]},positions:{type:Array,default:()=>[]},positionsUniq:{type:Boolean,default:!1},uniq:{type:Boolean,default:!1},labelMap:{type:Object,default:()=>({})}},emits:["remove:rarity","remove:job","remove:label","remove:position","unset:uniq","unset:positions-uniq"],setup(s,{emit:o}){const t=s,i=o,d=S(()=>{const e=[];for(const l of t.rares)e.push({kind:"rarity",value:l,label:ke[l]||`Rarity ${l}`,color:E.rarity});for(const l of t.jobs)e.push({kind:"job",value:l,label:xe[l]||`Job ${l}`,color:E.job});t.uniq&&e.push({kind:"uniq",value:!0,label:"Unique only",color:E.uniq});for(const l of t.positions){const u=Le[l]||`Slot ${l}`;e.push({kind:"position",value:l,label:u,color:E.position})}t.positionsUniq&&e.push({kind:"positions-uniq",value:!0,label:"Exact slots",color:E.position});for(const l of t.labels){const u=t.labelMap[l];u&&e.push({kind:"label",value:l,label:u.text,color:`#${u.colorHex||"5E5E5E"}`})}return e});function a(e){e.kind==="rarity"?i("remove:rarity",e.value):e.kind==="job"?i("remove:job",e.value):e.kind==="label"?i("remove:label",e.value):e.kind==="uniq"?i("unset:uniq"):e.kind==="position"?i("remove:position",e.value):e.kind==="positions-uniq"&&i("unset:positions-uniq")}return(e,l)=>(f(),p("div",Be,[d.value.length?(f(),p("div",Ee,[(f(!0),p(P,null,R(d.value,(u,m)=>(f(),p("button",{key:m,class:"chip group",style:D({"--chip":u.color}),onClick:h=>a(u),title:"Remove filter"},[l[0]||(l[0]=c("span",{class:"chip-dot","aria-hidden":"true"},null,-1)),c("span",Ie,L(u.label),1)],12,Se))),128))])):_("",!0)]))}},Je=j(Ce,[["__scopeId","data-v-588683bf"]]),Fe={class:"flex justify-center items-center py-6"},Me={key:1,class:"text-xs opacity-70 animate-pulse"},Ke={__name:"WikiInfinitePager",props:{isLoading:{type:Boolean,default:!1},hasNextPage:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rootSelector:{type:String,default:""},useScrollFallback:{type:Boolean,default:!0},fallbackOffset:{type:Number,default:800},rootMargin:{type:String,default:"800px 0px 600px 0px"},threshold:{type:Number,default:.01}},emits:["load-more"],setup(s,{emit:o}){const t=s,i=o,d=x(null);let a=null,e=null;function l(){return t.hasNextPage&&!t.isLoading&&!t.disabled}function u(){d.value&&(a&&a.disconnect(),a=new IntersectionObserver(r=>{const g=r[0];g&&g.isIntersecting&&l()&&i("load-more")},{root:e instanceof Element?e:null,rootMargin:t.rootMargin,threshold:t.threshold}),a.observe(d.value))}let m=0,h=0;function y(){const r=e instanceof Element?e.scrollTop:window.scrollY||window.pageYOffset,g=e instanceof Element?e.clientHeight:window.innerHeight,n=e instanceof Element?e.scrollHeight:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);return r+g+t.fallbackOffset>=n}function v(){t.useScrollFallback&&l()&&(m||(m=requestAnimationFrame(()=>{if(m=0,y()){const r=performance.now();r-h>300&&(h=r,i("load-more"))}})))}function w(){if(!t.useScrollFallback)return;(e instanceof Element?e:window).addEventListener("scroll",v,{passive:!0}),window.addEventListener("resize",v,{passive:!0})}function b(){(e instanceof Element?e:window).removeEventListener("scroll",v),window.removeEventListener("resize",v),m&&cancelAnimationFrame(m),m=0}return W(()=>{e=t.rootSelector?document.querySelector(t.rootSelector):null,u(),w(),v()}),M(()=>{a&&a.disconnect(),b()}),$(()=>[t.isLoading,t.hasNextPage,t.disabled,t.rootSelector,t.rootMargin,t.threshold],()=>{const r=t.rootSelector?document.querySelector(t.rootSelector):null;r!==e&&(b(),e=r,w()),u(),v()},{flush:"post"}),(r,g)=>(f(),p("div",Fe,[c("div",{ref_key:"sentinel",ref:d,class:"w-px h-px opacity-0"},null,512),s.hasNextPage&&!s.isLoading?(f(),p("button",{key:0,onClick:g[0]||(g[0]=n=>r.$emit("load-more")),class:"text-sm px-4 py-2 ring-1 ring-white/10 hover:ring-white/20 rounded-md bg-neutral-800/40"}," Load more ")):_("",!0),s.isLoading?(f(),p("div",Me," Loading... ")):_("",!0)]))}},Ae=["onKeydown"],Ne=["aria-label"],Oe={class:"header-left"},Pe={class:"modal-body"},Re={__name:"WikiDetailModal",props:{open:{type:Boolean,default:!1},mobile:{type:Boolean,default:!1},ariaLabel:{type:String,default:"Detail modal"}},emits:["close"],setup(s,{emit:o}){const t=o;function i(){t("close")}return(d,a)=>(f(),q(T,{to:"body"},[I(F,{name:"modal-fade"},{default:C(()=>[s.open?(f(),p("div",{key:0,class:"modal-root",onKeydown:Y(G(i,["stop","prevent"]),["esc"])},[c("div",{class:"modal-overlay",onClick:i}),I(F,{name:s.mobile?"modal-slide":"modal-scale",appear:""},{default:C(()=>[c("div",{class:N(["modal-panel",{"modal-panel--mobile":s.mobile}]),role:"dialog","aria-modal":"true","aria-label":s.ariaLabel},[c("div",{class:N(["modal-header",{"modal-header--mobile":s.mobile}])},[c("div",Oe,[O(d.$slots,"header-left",{},void 0,!0)]),c("button",{class:"modal-close",type:"button",onClick:i}," Close ")],2),c("div",Pe,[O(d.$slots,"default",{},void 0,!0)])],10,Ne)]),_:3},8,["name"])],40,Ae)):_("",!0)]),_:3})]))}},Ye=j(Re,[["__scopeId","data-v-45d307ed"]]);function Ge(s={}){const{initialLocale:o="en",loadResources:t,onSearchChange:i,mobileQuery:d="(max-width: 640px)"}=s,a=x(o),e=x(""),l=x(!1),u=x(!1),m=x(!1),h=()=>{if(typeof window>"u"){l.value=!1;return}l.value=window.matchMedia(d).matches},y=()=>{u.value=!u.value},v=n=>{u.value=!!n},w=n=>{m.value=!!n},b=n=>{if(typeof document>"u")return;const k=document.documentElement,B=document.body;k.classList.toggle("hidden-scroll",!!n),B.classList.toggle("hidden-scroll",!!n)},r=n=>typeof t!="function"?null:Promise.resolve(t(n??a.value)),g=n=>{const k=r(n);k&&typeof k.then=="function"&&k.catch(()=>{})};return $(a,n=>{g(n)}),$(e,n=>{typeof i=="function"&&i(n??"")}),$(m,n=>{b(n)}),W(()=>{h(),typeof window<"u"&&window.addEventListener("resize",h,{passive:!0}),g(a.value)}),M(()=>{typeof window<"u"&&window.removeEventListener("resize",h),b(!1)}),{locale:a,search:e,isMobile:l,showFilterPanel:u,modalOpen:m,toggleFilterPanel:y,setFilterPanelOpen:v,setModalOpen:w,setSearch:n=>{e.value=n},setLocale:n=>{a.value=n},updateIsMobile:h}}export{Je as A,He as W,Te as _,Ve as a,Ue as b,ze as c,Ge as d,De as e,Ke as f,Ye as g,We as u};
